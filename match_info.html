<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/style.css"/>
		<link rel="stylesheet" type="text/css" href="css/mobileSelect.css"/>
		<script src="js/mui.min.js"></script>
		<script src="js/mobileSelect.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		    <h1 class="mui-title">酒店详情</h1>
		</header>
		<div class="mui-content match">
			<div class="matchShow">
				<div class="matchImgShow"> 
				<img src="images/upgrade_tree.png">
			</div>
			<div class="matchProfile">
				<div class="matchInfo">
					<div class="matchBigTitle">
						好眼光，这样的产品都被您选中了！
					</div>
					<div class="matchTitle">
						印度尼西亚巴厘岛+新加坡7日6晚跟团游(5钻)·『携程自营·海岛控·亲子纯玩·国庆B线第二人减1000』阿勇河泛舟·蓝梦天堂海俱乐部 | 巴厘岛4晚海边钻5+新加坡市区钻5·享2天自由·签证无忧
					</div>
					<div class="matchprice">
						<span class="schedule"></span><br />
						<span class="price"></span>
						<span class="per_cite"></span>
					</div>
				</div>
			</div>
				
			</div>
			
			<!--<div class="inputInfo">
				<div class="mui-input-row">
				    <label>预算价格</label>
				    <input type="number" name="budget" onkeyup="value=value.match(/\d+\.?\d{0,2}/,'')"   placeholder="请输入预算价格或者直接最低价支付">
				</div>
				<div id="triptype">
					<div class="mui-input-row">
					    <label>酒店信息</label>
					    <input type="text" name="hotel" maxlength="50"  placeholder="请确认信息后填写">
					</div>
					
				</div>
				<div id="triptype">
					<div class="mui-input-row">
					    <label>入住人数</label>
					    <input type="number" name="number" maxlength="50" onkeyup="value=value.match(/\d{0,10}/,'')"    placeholder="请确认信息后填写">
					</div>
					
				</div>
				<div id="triptype">
					<div class="mui-input-row">
					    <label>联系电话</label>
					    <input type="tel" name="phone" maxlength="11"  placeholder="请确认信息后填写">
					</div>
					
				</div>
				<div id="triptype">
					<div class="mui-input-row">
					    <label>入住时间</label>
					    <input type="text" class="checkin"  readonly="readonly" name="checkin"  maxlength="50"    placeholder="请确认信息后填写">
					</div>
					
				</div>
			</div>-->
			<div class="footerDefacult footerDefacult1">
				<div>
					<!--<span class="footerDefacult_zj">￥100</span>
					<span>最低支付</span>-->
				</div>
				<div>
					<!--<span class="pay_order">支付定金<img src="images/defauil_5.png"></span>-->
					<a href="javascript:void(0);" class="reserve">开始预订<br/>&nbsp;</a>
				</div>
			</div>
		</div>
		
	</body>
	<script type="text/javascript">
			mui.init({
				swipeBack:true,
			})
			mui.plusReady(function(){
				document.getElementsByClassName('reserve')[0].addEventListener('tap',function(){
            		
            		var fromAddress = document.getElementById('fromAddress').value;
            		var toAddress = document.getElementById('toAddress').value;
            		var fromAddressName = document.getElementById('fromAddressName').value;
            		var toAddressName = document.getElementById('toAddressName').value;
            		var gotime = document.getElementById('gotime').value;
            		mui.openWindow({
            			url:'reserve.html',
            			id :'reserve.html',
            			extras :{
            				fromAddress	:fromAddress,
            				fromAddressName:fromAddressName,
            				toAddress	:toAddress,
            				toAddressName:toAddressName,
            				gotime		:gotime,
            				backtime	:gotime,
            				triptype	: 1,
            				type 		: 2,
            				mid			:mid
            			}
            		})
            	})
				
				
//				var date = new Date();
//          	var month = date.getMonth();
//          	var day = date.getDate();
//				var monthArr = ['01月','02月','03月','04月','05月','06月','07月','08月','09月','10月','11月','12月'];
//				var dayArr = new Array();
//				for(var i = 1 ; i < 32 ; i++){ 
//					if(i < 10){
//						i='0'+i
//					}
//					dayArr.push(i+'日');
//				}
//	//			var numberArr = ['1','2','3','4'];
//				
//				var checkin = new MobileSelect({
//				    trigger: '.checkin',
//				    title: '入住时间',
//				    position:[month,day],
//				    wheels: [
//				                {data: monthArr},
//				                {data: dayArr}
//				            ],
//				    callback:function(indexArr, data){
//				    	var data = data.toString().replace(',','');
//				    	$('.checkin').val(data);
//				    }
//				});
//				
//				
				var self = plus.webview.currentWebview();
				var mid = self.mid;
				//获取详情
				plus.nativeUI.showWaiting('加载中...');
				mui.ajax('http://139.196.85.135:8016/eventapi/getEventInfo',{
					data:{
						'mid':mid
					},
					dataType:'json',//服务器返回json格式数据
					type:'post',//HTTP请求类型
					timeout:10000,//超时时间设置为10秒；              
					success:function(data){
						plus.nativeUI.closeWaiting();
						
						if(data.state =='ok'){
							var match  = data.msg;
							var html = '<div class="matchImgShow"> '
										+'<img src="'+match.photo+'">'
										+'</div>'
										+'<div class="matchProfile">'
										+'<div class="matchInfo">'
										+'<div class="matchBigTitle">'
										+'好眼光，这样的产品都被您选中了！'
										+'</div>'
										+'<div class="matchTitle">'
										+match.summary
										+'</div>'
										+'<div class="matchprice">'
										+'<span class="schedule">班期:'+match.schedule+'</span><br />'
										+'<span class="fromCity">出发地:'+match.from_city_name+'</span><br />'
										+'<span class="toCity">目的地:'+match.to_city_name+'</span><br />'
										+'<span class="price">'+match.price+'人/起</span>'
										+'<span class="per_cite">'+match.number+'人次出游</span>'
										+'<input value='+match.from_city+' id="fromAddress" type="hidden">'
										+'<input value='+match.to_city+' id="toAddress" type="hidden">'
										+'<input value='+match.from_city_name+' id="fromAddressName" type="hidden">'
										+'<input value='+match.to_city_name+' id="toAddressName" type="hidden">'
										+'<input value='+match.schedule+' id="gotime" type="hidden">'
										+'</div>'
										+'</div>'
									+'</div>';
							
							$('.matchShow').html(html)
							$('.mui-title').html(match.title)
							
						}else{
							plus.nativeUI.closeWaiting();
							mui.toast(data.msg);
						}
						
					},
					error:function(xhr,type,errorThrown){
						mui.toast('系统异常');
					}
				});		
//				
//				mui('.footerDefacult').on('tap','div a',function(){
//					var userInfo = plus.storage.getItem('userInfo');
//					if(userInfo == '' || userInfo ==undefined){
//						mui.toast('请先登录');
//						mui.openWindow({
//								url	:	'login.html',
//								id	:	'login.html',
//						})
//						return;
//					}
//					var budget = $('input[name="budget"]').val();
//					var hotel = $('input[name="hotel"]').val();
//					var number = $('input[name="number"]').val();
//					var checkin = $('input[name="checkin"]').val();
//					var phone = $('input[name="phone"]').val();
//					if($.trim(budget) =='' || $.trim(hotel) =='' || $.trim(number) =='' || $.trim(checkin) =='' || $.trim(phone) ==''){
//						mui.toast('请完整填写信息');
//						return;
//					}
//					var phonereg =/^[1][3,4,5,7,8][0-9]{9}$/;
//					if(!phonereg.test(phone)){
//						mui.toast('手机号码格式不正确');
//						return;
//					} 
//					if(mid == undefined || mid == 0 || mid == ''){
//						mui.toast('该酒店信息已失效');
//						return ;
//					}
//					plus.nativeUI.showWaiting('申请支付...');
//					mui.ajax('http://139.196.85.135:8016/eventapi/matchOrderPay',{
//						data:{
//							'mid':mid,
//							'hotel':hotel,
//							'number':number,
//							'budget':budget,
//							'checkin':checkin,
//							'phone':phone,
//							'userInfo':userInfo
//							},
//						dataType:'json',//服务器返回json格式数据
//						type:'post',//HTTP请求类型
//						timeout:10000,//超时时间设置为10秒；              
//						success:function(data){
//							plus.nativeUI.closeWaiting();
//							console.log(JSON.stringify(data));return;
//							if(data.state =='ok'){
//								var match  = data.msg;
//								$('.matchTitle').html(match.title)
//								$('.schedule').html('班期：'+match.schedule);
//								$('.price').html(match.price+'人/起');
//								$('.per_cite').html(match.number+'人次出游');
//								$('.matchImgShow img').attr('src',match.photo);
//							}else{
//								plus.nativeUI.closeWaiting();
//								mui.toast(data.msg);
//							}
//							
//						},
//						error:function(xhr,type,errorThrown){
//							plus.nativeUI.closeWaiting();
//							mui.toast('系统异常');
//						}
//					});		
//					
//				})
			})
		</script>
</html>